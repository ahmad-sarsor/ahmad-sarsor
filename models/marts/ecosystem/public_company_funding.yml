version: 2

models:
  - name: public_company_funding
    description: Public funding events for Israeli tech companies (IPO, SPAC, etc.).
    config:
      contract:
        enforced: true
    constraints:
      - type: primary_key
        columns: [event_id]
        warn_unenforced: false

    columns:
      - name: event_id
        description: Unique identifier for each public funding event.
        data_type: string
        constraints:
          - type: not_null
        data_tests:
          - unique
          - not_null

      - name: event_type
        description: Type of public funding event.
        data_type: string

      - name: event_date
        description: Date when the public funding event occurred.
        data_type: date

      - name: event_year
        description: Year when the public funding event occurred.
        data_type: int64

      - name: company_id
        description: Unique identifier for the company.
        data_type: string
        constraints:
          - type: not_null
        data_tests:
          - not_null
          - relationships:
              to: ref('companies')
              field: company_id
              config:
                severity: warn

      - name: company_name
        description: Name of the company.
        data_type: string
        constraints:
          - type: not_null
        data_tests:
          - not_null

      - name: company_type
        description: Type of the company.
        data_type: string

      - name: company_primary_sector_name
        description: Primary sector of the company.
        data_type: string

      - name: is_ipo
        description: Whether this event is an IPO.
        data_type: int64

      - name: is_exit
        description: Whether this event qualifies as an exit.
        data_type: int64

      - name: capital_raised
        description: Amount of capital raised in USD.
        data_type: int64

      - name: stock_exchange_name
        description: Name of the stock exchange.
        data_type: string

      - name: stock_exchange_country
        description: Country of the stock exchange.
        data_type: string

      - name: ticker
        description: Stock ticker symbol.
        data_type: string

      - name: valuation
        description: Company valuation at the time of the event in USD.
        data_type: int64

      - name: source
        description: Source of the public funding event information.
        data_type: string

      - name: disclosure_company_level
        description: all = publish the name and calculate | aggregation = calculate only | none = exclude entirely.
        data_type: string

      - name: disclosure_event_level
        description: Level of disclosure for the event.
        data_type: string

      - name: disclosure_event_type_level
        description: Level of disclosure for the event type.
        data_type: string

      - name: event_created_date
        description: Date when the event was created.
        data_type: date

      - name: event_creator_email
        description: Email of the user who created the event.
        data_type: string

      - name: event_creator_name
        description: Name of the user who created the event.
        data_type: string

      - name: event_updated_date
        description: Date and time when the event was last updated.
        data_type: datetime

      - name: event_updater_email
        description: Email of the user who last updated the event.
        data_type: string

      - name: event_updater_name
        description: Name of the user who last updated the event.
        data_type: string