version: 2

models:
  - name: entity_tags
    description: |
      Maps entities (companies, investors, etc.) to their associated tags,
      enriched with entity details from the entities intermediate model.  

    config:
      tags: ["product_analytics", "ecosystem"]

    columns:
      - name: tag_id
        description: Unique identifier for the tag assignment
        constraints:
          - type: primary_key
          - type: not_null
        data_tests:
          - unique
          - not_null

      - name: entity_id
        description: Unique identifier for the entity
        data_tests:
          - not_null
          - relationships:
              to: ref('int_entities')
              field: entity_id

      - name: entity_name
        description: Name of the entity

      - name: entity_type
        description: Type of the entity

      - name: tag_name
        description: Name of the tag assigned to the entity
        data_tests:
          - not_null