version: 2

models:
  - name: investors_funds
    description: >
      Investment firm fund-raising events - tracks when investors (VCs, PEs) raise capital for their own funds.
      This is distinct from investor_investments which tracks investments INTO startups.
      Joins fund events with investor entity details for complete fund analysis.
    config:
      contract:
        enforced: true
    constraints:
      - type: primary_key
        columns: [fund_id]
        warn_unenforced: false

    columns:
      - name: fund_id
        description: Unique identifier for the fund-raising event.
        data_type: string
        constraints:
          - type: not_null
        data_tests:
          - unique
          - not_null

      - name: fund_date
        description: Date when the fund was raised/announced.
        data_type: date

      - name: fund_year
        description: Year extracted from fund_date.
        data_type: int64

      - name: investor_id
        description: Unique identifier for the investor entity that raised the fund.
        data_type: string
        constraints:
          - type: not_null
        data_tests:
          - not_null
          - relationships:
              to: ref('investors')
              field: investor_id
              config:
                severity: warn

      - name: investor_name
        description: Name of the investor entity (VC/PE firm).
        data_type: string

      - name: investor_type
        description: Type of the investor entity (e.g., Investment Firm).
        data_type: string

      - name: investor_sub_type
        description: Sub-type of the investor (e.g., VC, PE, CVC).
        data_type: string

      - name: investor_country
        description: Country where the investor is headquartered.
        data_type: string

      - name: investor_is_israeli
        description: Whether the investor is Israeli-based.
        data_type: INT64

      - name: fund_name
        description: Name of the raised fund (e.g., "Fund III", "Growth Fund").
        data_type: string

      - name: fund_rank
        description: Sequential rank of this fund for the investor, ordered by fund_date (1 = first fund).
        data_type: int64

      - name: invested_amount
        description: Amount raised for the fund in USD.
        data_type: int64

      - name: disclosure_amount_level
        description: Visibility level of the fund amount.
        data_type: string

      - name: disclosure_event_level
        description: Visibility level of the fund event.
        data_type: string

      - name: source
        description: Data source of the fund information.
        data_type: string

      - name: event_created_date
        description: Date when the fund record was created.
        data_type: date

      - name: event_creator_email
        description: Email of the user who created the fund record.
        data_type: string

      - name: event_creator_name
        description: Name of the user who created the fund record.
        data_type: string

      - name: event_updated_date
        description: Date and time when the fund record was last updated.
        data_type: datetime

      - name: event_updater_email
        description: Email of the user who last updated the fund record.
        data_type: string

      - name: event_updater_name
        description: Name of the user who last updated the fund record.
        data_type: string